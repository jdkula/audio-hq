fragment FileInfo on file {
    id
    type
    path

    name
    description
    length
    ordering

    workspace_id

    download_url
}

query WorkspaceFiles($workspaceId: uuid!) {
    file(where: {workspace_id: {_eq: $workspaceId}}) {
        ...FileInfo
    }
}

mutation UpdateFile($id: uuid!, $update: file_set_input!) {
    update_file_by_pk(_set: $update, pk_columns: {id: $id}) {
        ...FileInfo
    }
}

mutation DeleteFile($job: delete_job_insert_input!) {
    insert_delete_job(objects: [$job]) {
        affected_rows
    }
}

mutation SetFilesPath($files: [uuid!]!, $path: jsonb) {
    update_file(where: {id: {_in: $files}}, _set: {path: $path}) {
        affected_rows
        returning {
            ...FileInfo
        }
    }
}