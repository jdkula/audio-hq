mutation StopDeck($deckId: uuid!) {
    delete_deck_by_pk(id: $deckId) {
        id
        workspace_id
    }
}

mutation UpdateDeck($deckId: uuid!, $update: deck_set_input!) {
    update_deck_by_pk(pk_columns: {id: $deckId}, _set: $update) {
        ...DeckInfo
    }
}

mutation SetQueue($deckId: uuid!, $newQueue: [track_insert_input!]!, $dummy: timestamptz!) {
    delete_track(where: {deck: {id: {_eq: $deckId}}}) {
        affected_rows
    }
    insert_track(objects: $newQueue) {
        affected_rows
    }
    update_deck_by_pk(pk_columns: {id: $deckId}, _set: {start_timestamp: now, dummy: $dummy}) {
        ...DeckInfo
    }
}

mutation PlayDeck($workspaceId: uuid!, $deck: deck_insert_input!, $isMain: Boolean! = false) {
    delete_track(where: {
        deck: {
            workspace_id: {_eq: $workspaceId},
            type: {_eq: main},
        }
    }) @include(if: $isMain) {
        affected_rows
        returning {
            id
        }
    }
    insert_deck_one(object: $deck) {
        ...DeckInfo
    }
}